{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","watermark":"","children":[{"parent":"root","lineStyle":{"randomLineColor":"#13A3ED"},"children":[{"parent":"812b3a9306dd","children":[],"id":"ac25a09c6779","title":"Subtopic"}],"id":"812b3a9306dd","title":"session定义"},{"parent":"root","lineStyle":{"randomLineColor":"#74C11F"},"children":[{"parent":"0291282e6d37","children":[],"id":"6b301358daf4","title":"跟踪用户"}],"id":"0291282e6d37","title":"使用目的"},{"parent":"root","lineStyle":{"randomLineColor":"#FFCA01"},"children":[{"parent":"78376c5ca10c","children":[],"id":"0dd56e9c09ba","title":"Subtopic"},{"parent":"78376c5ca10c","children":[],"id":"376d2ba88b5c","title":"Subtopic"}],"id":"78376c5ca10c","title":"工作原理","tags":[{"color":"rgb(255, 255, 255)","background":"rgb(122, 0, 242)","text":"待定"}]},{"parent":"root","lineStyle":{"randomLineColor":"#02ACF4"},"children":[{"parent":"d59dcd06838e","children":[],"id":"14b999eaaa2a","title":"Web服务器硬盘中"}],"id":"d59dcd06838e","title":"存储位置"},{"parent":"root","lineStyle":{"randomLineColor":"#BE49C4"},"children":[{"parent":"f79a14d23338","children":[{"parent":"6163415ab6f1","children":[{"parent":"a37ccd7e2889","children":[{"parent":"9ea3aba333a1","children":[{"parent":"5563db7aca46","note":"加载php.ini配置文件中有关Session的配置信息至web服务器内存。","children":[],"id":"10e3a090d86b","title":"加载配置信息"},{"parent":"5563db7aca46","note":"- 若Http请求头中**不存在**形如“Set-Cookie:PHPSESSID=SID”的**请求头信息**，**创建**一个新的SessionID标识该请求。**表示用户第一次访问本网站。**\n\n- 若Http请求头中**存在**形如“Set-Cookie:PHPSESSID=SID”的**请求头信息**，直接使用Cookie请求头中已有的SessionID。**表示用户不是第一次访问本网站。**","children":[],"id":"a4041474a118","title":"创建或使用SessionID"},{"parent":"5563db7aca46","note":"- 创建**一个新的SessionID标识该请求时，则**创建Session文件**，此时$_SESSION为空数组。\n- 使用Cookie请求头中已有的SessionID时，则将Session文件中的内容**解析到**$_SESSION中。","children":[],"id":"bdf4d5fe646f","title":"创建或解析Session文件"},{"parent":"5563db7aca46","note":"- Cookie响应头信息会随着响应发送给浏览器。\n- Cookie响应头信息形如“Set-Cookie:PHPSESSID=SID。","children":[],"id":"50773be401af","title":"产生Cookie响应头信息"}],"id":"5563db7aca46","title":"主要功能"}],"id":"9ea3aba333a1","title":"session_start()函数","icons":[],"tags":[]}],"id":"a37ccd7e2889","title":"开启session"},{"parent":"6163415ab6f1","children":[{"parent":"93e5358458be","children":[{"parent":"1597e645c056","children":[{"parent":"c497c0186e10","note":"PHP提供了$_SESSION负责解析和修改Session文件。","children":[],"id":"1fca25403f91","title":"解析修改Session文件"}],"id":"c497c0186e10","title":"主要功能"}],"id":"1597e645c056","title":"$_SESSION数组"}],"id":"93e5358458be","title":"增删改查"}],"id":"6163415ab6f1","title":"第一次请求"}],"id":"f79a14d23338","title":"使用步骤"},{"parent":"root","lineStyle":{"randomLineColor":"#0D7C82"},"children":[{"parent":"c61ab552ec52","children":[{"parent":"1a7464d5c765","note":"- 原理：page1程序运行结束后，page1页面**创建的SessionID信息被放置到Cookie响应头中**，连同响应正文一起作为响应，返回给浏览器。\n- 如果禁用了Cookie，那么SessionID就无法传回至浏览器中。第二次开启session_start()函数时，**请求头中没有包含SessionID的Cookie信息**，web服务器就会创建一个新的SessionID，于是无法达到跟踪用户的目的。","children":[],"id":"b4c74de7e62b","title":"web服务器创建的SID不能传回到浏览器中"}],"id":"1a7464d5c765","title":"禁用了什么？"},{"parent":"c61ab552ec52","children":[{"parent":"cc7c859e4eb7","children":[{"parent":"3f355f8f1c31","children":[{"parent":"a79f5e0747e7","children":[],"id":"38e59941e103","title":"string session_id([string id])"}],"id":"a79f5e0747e7","title":"语法"},{"parent":"3f355f8f1c31","children":[{"parent":"46b9dc820d7c","note":"- 如果向该函数**传递id参数值**，可以将当前PHP页面SessionID的值设置为id参数值。\n- 即有没有传参？如果传了，就设置。","children":[],"id":"91acc52693bc","title":"设置Session ID"},{"parent":"46b9dc820d7c","note":"- 如果**没有**向该函数**传递id参数值**，该函数返回当前PHP页面SessionID的值。\n- 即有没有传参？如果没传，就获取。","children":[],"id":"742409f57973","title":"返回Session ID"}],"id":"46b9dc820d7c","title":"功能"},{"parent":"3f355f8f1c31","children":[{"parent":"db062c4c2037","children":[],"id":"d31ac3cf9ba2","title":"Session ID标记"}],"id":"db062c4c2037","title":"返回值"}],"id":"3f355f8f1c31","title":"session_id()函数"},{"parent":"cc7c859e4eb7","children":[{"parent":"05f5d2fab929","children":[{"parent":"34f4f318bdee","children":[],"id":"bceeab23c352","title":"string&nbsp;session_name([string&nbsp;id])"}],"id":"34f4f318bdee","title":"语法"},{"parent":"05f5d2fab929","children":[{"parent":"99ce8cacaea1","note":"- 如果向该函数**传递name参数值**，可以将当前PHP页面Session的name名称设置为name参数值。\n- 即有没有传参？如果传了，就设置。","children":[],"id":"f8cbf6108f24","title":"设置Session 名称"},{"parent":"99ce8cacaea1","note":"- 如果**没有**向该函数**传递name参数值**，该函数返回当前PHP页面Session的名称。\n- 即有没有传参？如果没传，就获取。","children":[],"id":"1f8bcd3f10f4","title":"获取Session 名称"}],"id":"99ce8cacaea1","title":"功能"},{"parent":"05f5d2fab929","children":[{"parent":"d8dd92dd24cc","children":[],"id":"b425d7c5ae81","title":"Session 名称"}],"id":"d8dd92dd24cc","title":"返回值"}],"id":"05f5d2fab929","title":"session_name()函数"},{"parent":"cc7c859e4eb7","children":[{"parent":"e2ed846c5637","children":[{"parent":"3df09f94c341","children":[],"id":"c3d737f09530","title":"字符串"}],"id":"3df09f94c341","title":"数据类型"},{"parent":"e2ed846c5637","children":[{"parent":"113635867167","children":[],"id":"49aed52d1ced","title":"Session name=Session ID"}],"id":"113635867167","title":"数据格式"},{"parent":"e2ed846c5637","children":[{"parent":"1194688a01c7","note":"- 如果PHP程序**开启了Session**，并且如果**请求头中不包含**形如\"Set-Cookie:PHPSESSID=SID\"的Cookie请求头信息，将产生SID常量。\n- 否则SID的值为**空字符串**。","children":[],"id":"e4e82ce9dc11","title":"请求头中没有Set-Cookie"}],"id":"1194688a01c7","title":"产生条件"}],"id":"e2ed846c5637","title":"SID常量"}],"id":"cc7c859e4eb7","title":"所需工具"},{"parent":"c61ab552ec52","children":[{"parent":"c10fd1e3afe2","children":[],"id":"61941d93a330","title":"在URL后附加SID查询字符串。"}],"id":"c10fd1e3afe2","title":"实现思路"}],"id":"c61ab552ec52","title":"禁用Cookie后Session的实现"},{"parent":"root","lineStyle":{"randomLineColor":"#FA5465"},"children":[{"parent":"36d401a54dde","note":"必须在PHP程序中**调用session_start()函数启动Session后**才能使用Session。","children":[{"parent":"bbdcd4238205","children":[],"id":"f511ff36a2f7","title":"子主题"}],"id":"bbdcd4238205","title":"必须开启session_start()函数"},{"parent":"36d401a54dde","note":"PHP程序开启Session时，**程序会产生Cookie响应头信息**，因此在使用session_start()函数之前，浏览器不能有任何输出（包括**空格、空行**。）","children":[],"id":"c33acc731501","title":"在使用session_start()函数之前，浏览器不能有任何输出"}],"id":"36d401a54dde","title":"注意事项"}],"root":true,"theme":"delicate_caihong","id":"root","title":"Session","structure":"mind_free"}},"meta":{"exportTime":"2021-08-16 11:14:12","member":"607e7baf5653bb2e1c7aa0cf","diagramInfo":{"creator":"607e7baf5653bb2e1c7aa0cf","created":"2021-08-15 22:30:56","modified":"2021-08-16 11:05:41","title":"Session","category":"mind_free"},"id":"611925200791291e0c77d422","type":"ProcessOn Schema File","version":"1.0"}}